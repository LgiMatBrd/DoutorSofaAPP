{"version":3,"sources":["angular-material-datetimepicker.js"],"names":["ngMaterialDatePicker","moment","moduleName","VIEW_STATES","DATE","HOUR","MINUTE","css","el","name","angular","element","window","getComputedStyle","template","module","service","mdcDefaultParams","this","$get","lang","setDefaultLocale","localeString","factory","default_params","date","time","minutes","seconds","format","minDate","maxDate","currentDate","navigator","userLanguage","language","weekStart","shortTime","cancelText","okText","amText","pmText","todayText","disableDates","weekDays","disableParentScroll","autoOk","editInput","clickOutsideToClose","minuteSteps","params","i","hasOwnProperty","directive","$mdDialog","$timeout","$compile","restrict","require","scope","ngChange","showTodaysDate","link","attrs","ngModel","isOn","dateOfTheDay","undefined","isString","ngModelOptions","*","debounce","$options","createChild","$formatters","push","value","m","isValid","$parsers","_d","addClass","after","clear","$setViewValue","$render","focus","on","e","preventDefault","blur","parent","removeClass","options","isUndefined","locals","show","controller","PluginController","controllerAs","openFrom","document","body","bindToController","hasBackDrop","skipHide","multiple","then","v","isSame","$q","$mdMenu","defaultParams","accepted_options","Object","keys","deferred","defer","copy","indexOf","resolve","reject","promise","$scope","currentView","_dialog","_attachedEvents","VIEWS","meridien","extend","init","$inject","prototype","timeMode","dateMode","initDates","start","currentNearestMinute","nearestMin","Math","round","minute","second","that","_dateParam","input","fallback","ret","isDefined","locale","isDate","x","getTime","_isAMomentObject","map","selectDate","initDate","initHours","initMinutes","initSeconds","SECOND","isAfterMinDate","checkHour","checkMinute","_return","_minDate","_date","hour","millisecond","parseInt","isBeforeMaxDate","checkTime","_maxDate","isInDisableDates","dut","isWeekDay","isoWeekday","calendarStart","isPM","incrementMonth","amount","isNextMonthVisible","add","isPreviousMonthVisible","incrementYear","isNextYearVisible","isPreviousYearVisible","openMenu","ev","open","monthsAvailable","monthsArr","curMonth","month","endOf","startOf","selectMonth","yearsAvailable","len","startYear","yearsArr","year","selectYear","isHourAvailable","convertHours","isMinuteAvailable","isSecondAvailable","today","ok","hide","cancel","selectMonthBefore","subtract","selectMonthAfter","selectYearBefore","selectYearAfter","selectAM","selectPM","h","okBtn","MONTHS_IN_ALL","Date","getFullYear","MONTHS","currentMonthIndex","low","picker","calendar","$onInit","days","length","toString","week","high","months","slice","topIndex","version","major","minor","getItemAtIndex","index","floor","monthObj","generateMonthCalendar","$watch","val2","val1","nDate","startOfMonth","iNumDay","daysInMonth","iWeek","daysTmp","slices","ceil","j","toDay","substring","isInRange","isSelectedDay","isDateOfTheDay","buildCalendarContent","tbody","querySelector","cal","tbodyHtml","forEach","weekDay","scopeRef","html","join","idx","oldIdx","minuteMode","mode","secondMode","componentRoot","setTimeDegRay","deg","ray","val","divider","isTouchSupported","EVENTS","POINTER_DOWN","POINTER_UP","POINTER_MOVE","onMoveEvent","closestTarget","currentTarget","closest","clientRect","getClientRects","changedTouches","offsetWidth","pageX","left","y","pageY","top","offsetHeight","sqrt","pow","atan2","PI","off","$on","exec","clock","pickerEl","w","pl","replace","pr","clockWidth","pL","pT","mL","mT","r","points","sin","cos","style","margin-left","margin-top","display","points24","j24","h24","left24","top24","hour24","setCurrentValue","clockCenter","centerWidth","centerHeight","_hL","_mL","_sL","height","marginTop","animateHands","s","rotateElement","WebkitTransform","-moz-transform","-ms-transform","transform","nbH","currentValue","tmp","setTime","pointAvailable","point","unWatcher","querySelectorAll","isElectron","process","type","define","amd","exports","global"],"mappings":"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","file":"angular-material-datetimepicker.min.js","sourcesContent":["(function () {\r\n  'use strict';\r\n\r\n  function ngMaterialDatePicker(moment) {\r\n  var moduleName = \"ngMaterialDatePicker\";\r\n\r\n  var VIEW_STATES = {\r\n    DATE: 0,\r\n    HOUR: 1,\r\n    MINUTE: 2\r\n  };\r\n\r\n  var css = function (el, name) {\r\n    el = angular.element(el);\r\n    return ('getComputedStyle' in window) ? window.getComputedStyle(el[0])[name] : el.css(name);\r\n  };\r\n\r\n  var template = \r\n    '<md-dialog class=\"dtp\" layout=\"column\" style=\"width: 300px;\">' +\r\n    '    <md-dialog-content class=\"dtp-content\">' +\r\n    '        <div class=\"dtp-date-view\">' +\r\n    '            <header class=\"dtp-header\">' +\r\n    '                <div class=\"dtp-actual-day\" ng-if=\"picker.dateMode\">{{picker.currentNearestMinute().format(\"dddd\")}}</div>' +\r\n    '                <div class=\"dtp-actual-day\" ng-if=\"!picker.timeMode\">{{picker.params.shortTime ? picker.currentDate.format(\"A\"):\" \"}}</div>' +\r\n    '                <div class=\"dtp-close text-right noselect\">' +\r\n    '                    <a href=\"#\" mdc-dtp-noclick ng-click=\"picker.hide()\">&times;</a>' +\r\n    '                </div>' +\r\n    '            </header>' +\r\n    '            <div class=\"dtp-date\" ng-if=\"picker.params.date\">' +\r\n    '                <div layout=\"row\">' +\r\n    '                    <div ng-click=\"picker.incrementMonth(-1)\" class=\"dtp-month-btn dtp-month-btn-prev noselect\" flex=\"30\"><span ng-if=\"picker.isPreviousMonthVisible()\">&#x25C4;</span></div>' +\r\n    '                    <md-menu md-offset=\"8 10\" flex>' +\r\n    '                        <div class=\"dtp-actual-month\" flex ng-click=\"picker.openMenu($mdMenu, $event)\">{{picker.currentDate.format(\"MMM\") | uppercase}}</div>' +\r\n    '                        <md-menu-content>' +\r\n    '                            <md-menu-item ng-repeat=\"itemMonth in picker.monthsAvailable()\">' +\r\n    '                            <md-button ng-click=\"picker.selectMonth(itemMonth)\">{{itemMonth}}</md-button>' +\r\n    '                            </md-menu-item>' +\r\n    '                        </md-menu-content>' +\r\n    '                    </md-menu>' +\r\n    '                    <div ng-click=\"picker.incrementMonth(1)\" class=\"dtp-month-btn dtp-month-btn-next noselect\" flex=\"30\"><span ng-if=\"picker.isNextMonthVisible()\">&#x25BA;</span></div>' +\r\n    '                </div>' +\r\n    '                <div class=\"dtp-actual-num\">{{picker.currentDate.format(\"DD\")}}</div>' +\r\n    '                <div layout=\"row\">' +\r\n    '                    <div ng-click=\"picker.incrementYear(-1)\" class=\"dtp-year-btn dtp-year-btn-prev noselect\" flex=\"30\"><span ng-if=\"picker.isPreviousYearVisible()\">&#x25C4;</span></div>' +\r\n    '                    <md-menu md-offset=\"8 10\" flex>' +\r\n    '                        <div class=\"dtp-actual-year\" flex ng-click=\"picker.openMenu($mdMenu, $event)\">{{picker.currentDate.format(\"YYYY\")}}</div>' +\r\n    '                        <md-menu-content>' +\r\n    '                            <md-menu-item ng-repeat=\"itemYear in picker.yearsAvailable()\">' +\r\n    '                            <md-button ng-click=\"picker.selectYear(itemYear)\">{{itemYear}}</md-button>' +\r\n    '                            </md-menu-item>' +\r\n    '                        </md-menu-content>' +\r\n    '                    </md-menu>' +\r\n    '                    <div ng-click=\"picker.incrementYear(1)\" class=\"dtp-year-btn dtp-year-btn-next noselect\" flex=\"30\"><span ng-if=\"picker.isNextYearVisible()\">&#x25BA;</span></div>' +\r\n    '                </div>'+\r\n    '            </div>' + //start time \r\n    '            <div class=\"dtp-time\" ng-if=\"picker.params.time && !picker.params.date\">' +\r\n    '                <div class=\"dtp-actual-maxtime\">' +\r\n    '                    <span ng-if=\"!picker.params.seconds\"><span ng-class=\"{selected: picker.currentView===picker.VIEWS.HOUR}\">{{picker.currentNearestMinute().format(picker.params.shortTime ? \"hh\":\"HH\")}}</span>:<span ng-class=\"{selected: picker.currentView===picker.VIEWS.MINUTE}\">{{picker.currentNearestMinute().format(\"mm\")}}</span></span>'+\r\n    '                    <span ng-if=\"picker.params.seconds\"><span ng-class=\"{selected: picker.currentView===picker.VIEWS.HOUR}\">{{picker.currentNearestMinute().format(picker.params.shortTime ? \"hh\":\"HH\")}}</span>:<span ng-class=\"{selected: picker.currentView===picker.VIEWS.MINUTE}\">{{picker.currentNearestMinute().format(\"mm\")}}</span>:<span ng-class=\"{selected: picker.currentView===picker.VIEWS.SECOND}\">{{picker.currentNearestMinute().format(\"ss\")}}</span></span>'+\r\n    '                    <span class=\"dtp-actual-meridien\" ng-if=\"picker.params.shortTime\">{{picker.currentDate.format(\"A\")}}</span>'+\r\n    '                </div>' +\r\n    '            </div>' +\r\n    '            <div class=\"dtp-picker\">' +\r\n    '                <mdc-datetime-picker-calendar date=\"picker.currentDate\" picker=\"picker\" class=\"dtp-picker-calendar\" ng-if=\"picker.currentView === picker.VIEWS.DATE\"></mdc-datetime-picker-calendar>' +\r\n    '                <div class=\"dtp-picker-datetime\" ng-cloak ng-if=\"picker.currentView !== picker.VIEWS.DATE\">' +\r\n    '                    <div class=\"dtp-actual-meridien\">' +\r\n    '                        <div ng-if=\"picker.params.shortTime\" class=\"left p20\">' +\r\n    '                            <a id=\"time-periods-am\" href=\"#\" mdc-dtp-noclick class=\"dtp-meridien-am\" ng-class=\"{selected: picker.meridien===\\'AM\\'}\" ng-click=\"picker.selectAM()\">{{picker.params.amText}}</a>' +\r\n    '                        </div>' +\r\n    '                        <div ng-if=\"!picker.timeMode && !picker.params.seconds\" class=\"dtp-actual-time p60\">' +\r\n    '                            <span ng-class=\"{selected: picker.currentView===picker.VIEWS.HOUR}\">{{picker.currentNearestMinute().format(picker.params.shortTime ? \"hh\":\"HH\")}}</span>:<span ng-class=\"{selected: picker.currentView===picker.VIEWS.MINUTE}\">{{picker.currentNearestMinute().format(\"mm\")}}</span>' +\r\n    '                        </div>' +\r\n    '                        <div ng-if=\"!picker.timeMode && picker.params.seconds\" class=\"dtp-actual-time p60\">' +\r\n    '                            <span ng-class=\"{selected: picker.currentView===picker.VIEWS.HOUR}\">{{picker.currentNearestMinute().format(picker.params.shortTime ? \"hh\":\"HH\")}}</span>:<span ng-class=\"{selected: picker.currentView===picker.VIEWS.MINUTE}\">{{picker.currentNearestMinute().format(\"mm\")}}</span>:<span ng-class=\"{selected: picker.currentView===picker.VIEWS.SECOND}\">{{picker.currentNearestMinute().format(\"ss\")}}</span>' +\r\n    '                        </div>' +\r\n    '                        <div ng-if=\"picker.params.shortTime\" class=\"right p20\">' +\r\n    '                            <a id=\"time-periods-pm\" href=\"#\" mdc-dtp-noclick class=\"dtp-meridien-pm\" ng-class=\"{selected: picker.meridien===\\'PM\\'}\" ng-click=\"picker.selectPM()\">{{picker.params.pmText}}</a>' +\r\n    '                        </div>' +\r\n    '                        <div class=\"clearfix\"></div>' +\r\n    '                    </div>' +\r\n    '                    <mdc-datetime-picker-clock mode=\"hours\" ng-if=\"picker.currentView===picker.VIEWS.HOUR\"></mdc-datetime-picker-clock>' +\r\n    '                    <mdc-datetime-picker-clock mode=\"minutes\" ng-if=\"picker.currentView===picker.VIEWS.MINUTE\"></mdc-datetime-picker-clock>' +\r\n    '                    <mdc-datetime-picker-clock mode=\"seconds\" ng-if=\"picker.currentView===picker.VIEWS.SECOND\"></mdc-datetime-picker-clock>' +\r\n    '                </div>' +\r\n    '            </div>' +\r\n    '        </div>' +\r\n    '    </md-dialog-content>' +\r\n    '    <md-dialog-actions class=\"dtp-buttons\">' +\r\n    '            <md-button class=\"dtp-btn-today md-button\" ng-click=\"picker.today()\"> {{picker.params.todayText}}</md-button>' +\r\n    '            <md-button class=\"dtp-btn-cancel md-button\" ng-click=\"picker.cancel()\"> {{picker.params.cancelText}}</md-button>' +\r\n    '            <md-button class=\"dtp-btn-ok md-button\" ng-click=\"picker.ok()\"> {{picker.params.okText}}</md-button>' +\r\n    '      </md-dialog-actions>' +\r\n    '</md-dialog>';\r\n\r\n  angular.module(moduleName, ['ngMaterial'])\r\n    .service('mdcDatetimePickerDefaultLocale', ['mdcDefaultParams', function (mdcDefaultParams) {\r\n      this.$get = function () {\r\n        return mdcDefaultParams().lang;\r\n      };\r\n\r\n      this.setDefaultLocale = function (localeString) {\r\n        mdcDefaultParams({ lang: localeString });\r\n      };\r\n    }])\r\n    .factory('mdcDefaultParams', function () {\r\n      var default_params = {\r\n        date: true,\r\n        time: true,\r\n        minutes: true,\r\n        seconds: false,\r\n        format: 'YYYY-MM-DD',\r\n        minDate: null,\r\n        maxDate: null,\r\n        currentDate: null,\r\n        lang: window.navigator.userLanguage || window.navigator.language || 'en',\r\n        weekStart: 0,\r\n        shortTime: false,\r\n        cancelText: 'Cancel',\r\n        okText: 'OK',\r\n        amText: 'AM',\r\n        pmText: 'PM',\r\n        todayText: 'Today',\r\n        disableDates: [],\r\n        weekDays: false,\r\n        disableParentScroll: false,\r\n        autoOk: false,\r\n        editInput: false,\r\n        clickOutsideToClose: false,\r\n        minuteSteps: 5\r\n      };\r\n\r\n      return function (params) {\r\n        if (params) {\r\n          for (var i in params) {\r\n            if (default_params.hasOwnProperty(i) && params.hasOwnProperty(i)) {\r\n              default_params[i] = params[i];\r\n            }\r\n          }\r\n        }\r\n\r\n        return default_params;\r\n      };\r\n    })\r\n    .directive('mdcDatetimePicker', ['$mdDialog', '$timeout', '$compile',\r\n      function ($mdDialog, $timeout, $compile) {\r\n\r\n        return {\r\n          restrict: 'A',\r\n          require: 'ngModel',\r\n          scope: {\r\n            currentDate: '=ngModel',\r\n            ngChange: '&',\r\n            time: '=',\r\n            date: '=',\r\n            minutes: '=',\r\n            seconds: '=',\r\n            minDate: '=',\r\n            maxDate: '=',\r\n            disableDates: '=',\r\n            weekDays: '=',\r\n            shortTime: '=',\r\n            weekStart: '=',\r\n            format: '@',\r\n            cancelText: '@',\r\n            okText: '@',\r\n            lang: '@',\r\n            amText: '@',\r\n            pmText: '@',\r\n            showTodaysDate: '@',\r\n            todayText: '@',\r\n            disableParentScroll: '=',\r\n            autoOk: '=',\r\n            editInput: '=',\r\n            clickOutsideToClose: '=',\r\n            minuteSteps: '='\r\n          },\r\n          link: function (scope, element, attrs, ngModel) {\r\n            var isOn = false;\r\n            if (!scope.format) {\r\n              if (scope.date && scope.time && scope.seconds) {\r\n                scope.format = 'YYYY-MM-DD HH:mm:ss';\r\n              } else if (scope.date && scope.time) {\r\n                scope.format = 'YYYY-MM-DD HH:mm';\r\n              } else if (scope.date) {\r\n                scope.format = 'YYYY-MM-DD';\r\n              } else {\r\n                scope.format = 'HH:mm';\r\n              }\r\n            }\r\n\r\n            var dateOfTheDay = null;\r\n            if (scope.showTodaysDate !== undefined && scope.showTodaysDate !== \"false\") {\r\n              dateOfTheDay = moment();\r\n            }\r\n\r\n            if (angular.isString(scope.currentDate) && scope.currentDate !== '') {\r\n              scope.currentDate = moment(scope.currentDate, scope.format);\r\n            }\r\n\r\n            if (ngModel) {\r\n              var ngModelOptions = {'*': '$inherit', debounce: 500};\r\n              ngModel.$options = ngModel.$options ? ngModel.$options.createChild(ngModelOptions) : ngModelOptions;\r\n              \r\n              ngModel.$formatters.push(function (value) {\r\n                if (typeof value === 'undefined') return;\r\n                var m = moment(value);\r\n                return m.isValid() ? m.format(scope.format) : '';\r\n              });\r\n              \r\n              ngModel.$parsers.push(function (value) {\r\n                if (typeof value === 'undefined') return;\r\n                var m = moment(value, scope.format);\r\n                if (m.isValid()) return m._d;\r\n                return;\r\n              });\r\n              \r\n            }\r\n\r\n            if (!scope.editInput) {\r\n              element.on('focus', function (e) {\r\n                e.preventDefault();\r\n                element.blur();\r\n                element.parent().removeClass('md-input-focused');\r\n                if (isOn) {\r\n                  return;\r\n                }\r\n                isOn = true;\r\n                var options = {};\r\n                for (var i in attrs) {\r\n                  if (scope.hasOwnProperty(i) && !angular.isUndefined(scope[i])) {\r\n                    options[i] = scope[i];\r\n                  }\r\n                }\r\n                options.currentDate = scope.currentDate;\r\n                options.showTodaysDate = dateOfTheDay;\r\n\r\n                var locals = {options: options};\r\n                $mdDialog.show({\r\n                  template: template,\r\n                  controller: PluginController,\r\n                  controllerAs: 'picker',\r\n                  locals: locals,\r\n                  openFrom: element,\r\n                  parent: angular.element(document.body),\r\n                  bindToController: true,\r\n                  clickOutsideToClose: options.clickOutsideToClose || false,\r\n                  disableParentScroll: options.disableParentScroll || false,\r\n                  hasBackDrop: false,\r\n                  skipHide: true,\r\n                  multiple: true\r\n                })\r\n                  .then(function (v) {\r\n                    scope.currentDate = v ? v._d : v;\r\n                    isOn = false;\r\n\r\n                    if (!moment(scope.currentDate).isSame(options.currentDate)) {\r\n                      $timeout(scope.ngChange, 0);\r\n                    }\r\n\r\n                    element.parent().removeClass('md-input-focused');\r\n\r\n                  }, function () {\r\n                    isOn = false;\r\n                    element.parent().removeClass('md-input-focused');\r\n                  })\r\n                ;\r\n              });\r\n            } else {\r\n              element.addClass('dtp-no-msclear');\r\n              element.after($compile('<md-button class=\"md-icon-button dtp-clear\" ng-click=\"clear()\">&#x2715;</md-button>')(scope));\r\n\r\n              scope.clear = function() {\r\n                ngModel.$setViewValue(null);\r\n                ngModel.$render();\r\n                $timeout(function() {\r\n                  element[0].focus();\r\n                }, 0, false);\r\n              };\r\n            }\r\n          }\r\n        };\r\n      }])\r\n    /** Returns a service that opens a dialog when the attribute shown is called\r\n     The dialog serves to select a date/time/etc. depending on the options given to the function show\r\n\r\n     @param options extends mdcDefaultParams\r\n     {\r\n       date: {boolean} =true,\r\n       time: {boolean} =true,\r\n       minutes: {boolean} =true,\r\n       seconds: {boolean} =false,\r\n       format: {string} ='YYYY-MM-DD',\r\n       minDate: {strign} =null,\r\n       maxDate: {string} =null,\r\n       currentDate: {string} =null,\r\n       lang: {string} =window.navigator.userLanguage || window.navigator.language || 'en',\r\n       weekStart: {int} =0,\r\n       shortTime: {boolean} =false,\r\n       cancelText: {string} ='Cancel',\r\n       showTodaysDate: {string} ='',\r\n       todayText: {string} ='Today',\r\n       okText: {string} ='OK',\r\n       amText: {string} ='AM',\r\n       pmText: {string} ='PM',\r\n       disableDates: {date[]} =[],\r\n       weekDays: {boolean} =false,\r\n       disableParentScroll: {boolean} =false,\r\n       autoOk: {boolean} =false,\r\n       editInput: {boolean} =false,\r\n       clickOutsideToClose: {boolean} =false,\r\n       minuteSteps: {int} =5\r\n     }\r\n     @return promise\r\n    */\r\n    .factory('mdcDateTimeDialog', [\"$mdDialog\", \"$q\", \"$mdMenu\", \"mdcDefaultParams\", function ($mdDialog, $q, $mdMenu, mdcDefaultParams) {\r\n      var defaultParams = mdcDefaultParams();\r\n      var accepted_options = Object.keys(defaultParams);\r\n      var service = {\r\n        show: function (options) {\r\n          var deferred = $q.defer();\r\n          var params = angular.copy(defaultParams);\r\n          for (var i in options) {\r\n            if (accepted_options.indexOf[i] != -1 && options.hasOwnProperty(i)) {\r\n              params = options[i];\r\n            }\r\n          }\r\n\r\n          var dateOfTheDay = null;\r\n          if (options.showTodaysDate !== undefined && options.showTodaysDate !== \"false\") {\r\n            dateOfTheDay = moment();\r\n          }\r\n          options.showTodaysDate = dateOfTheDay;\r\n\r\n          var locals = {options: options};\r\n          $mdDialog.show({\r\n            template: template,\r\n            controller: PluginController,\r\n            controllerAs: 'picker',\r\n            locals: locals,\r\n            parent: angular.element(document.body),\r\n            bindToController: true,\r\n            clickOutsideToClose: options.clickOutsideToClose || false,\r\n            disableParentScroll: options.disableParentScroll || false,\r\n            skipHide: true,\r\n            multiple: true\r\n          }).then(function (v) {\r\n            var currentDate = v ? v._d : v;\r\n            deferred.resolve(v ? v._d : v);\r\n          }, function () {\r\n            deferred.reject();\r\n          });\r\n          return deferred.promise;\r\n        }\r\n      };\r\n\r\n      return service;\r\n    }])\r\n  ;\r\n\r\n  var PluginController = function ($scope, $mdDialog, mdcDefaultParams) {\r\n    this.currentView = VIEW_STATES.DATE;\r\n    this._dialog = $mdDialog;\r\n\r\n    this._attachedEvents = [];\r\n    this.VIEWS = VIEW_STATES;\r\n    this.params = angular.copy(mdcDefaultParams());\r\n    this.meridien = 'AM';\r\n    this.params = angular.extend(this.params, this.options);\r\n\r\n    this.init();\r\n  };\r\n\r\n  PluginController.$inject = ['$scope', '$mdDialog', 'mdcDefaultParams'];\r\n  PluginController.prototype = {\r\n    init: function () {\r\n      this.timeMode = this.params.time && !this.params.date;\r\n      this.dateMode = this.params.date;\r\n      this.initDates();\r\n      this.start();\r\n    },\r\n    currentNearestMinute: function () {\r\n      var nearestMin = this.params.minuteSteps;\r\n      if (nearestMin < 1 || nearestMin > 59) nearestMin = 1;\r\n\r\n      var date = this.currentDate || moment();\r\n      var minutes = (nearestMin * Math.round(date.minute() / nearestMin));\r\n      if (minutes >= 60) {\r\n        minutes = 60 - nearestMin; //always push down\r\n      }\r\n      var seconds = date.second();\r\n      if (seconds >= 60) {\r\n        seconds = 60 - 1; //always push down\r\n      }\r\n      return moment(date).minutes(minutes).seconds(seconds);\r\n    },\r\n    initDates: function () {\r\n      var that = this;\r\n      var _dateParam = function (input, fallback) {\r\n        var ret = null;\r\n        if (angular.isDefined(input) && input !== null && input !== '') {\r\n          if (angular.isString(input)) {\r\n            if (typeof(that.params.format) !== 'undefined' && that.params.format !== null) {\r\n              ret = moment(input, that.params.format).locale(that.params.lang);\r\n            }\r\n            else {\r\n              ret = moment(input).locale(that.params.lang);\r\n            }\r\n          } else if (typeof input === 'number') {\r\n            ret = moment(input).locale(that.params.lang);\r\n          } else {\r\n            if (angular.isDate(input)) {\r\n              var x = input.getTime();\r\n              ret = moment(x, \"x\").locale(that.params.lang);\r\n            } else if (input._isAMomentObject) {\r\n              ret = input;\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          ret = fallback;\r\n        }\r\n        return ret;\r\n      };\r\n\r\n      this.currentDate = _dateParam(this.params.currentDate, moment());\r\n      this.currentNearestMinute();\r\n      this.minDate = _dateParam(this.params.minDate);\r\n      this.maxDate = _dateParam(this.params.maxDate);\r\n      this.disableDates = this.params.disableDates.map(function (x) {\r\n        return moment(x).format('MMMM Do YYYY');\r\n      });\r\n      this.selectDate(this.currentDate);\r\n      this.weekDays = this.params.weekDays;\r\n    },\r\n    initDate: function () {\r\n      this.currentView = VIEW_STATES.DATE;\r\n    },\r\n    initHours: function () {\r\n      this.currentView = VIEW_STATES.HOUR;\r\n    },\r\n    initMinutes: function () {\r\n      this.currentView = VIEW_STATES.MINUTE;\r\n    },\r\n    initSeconds: function () {\r\n      this.currentView = VIEW_STATES.SECOND;\r\n    },\r\n    isAfterMinDate: function (date, checkHour, checkMinute) {\r\n      var _return = true;\r\n\r\n      if (typeof(this.minDate) !== 'undefined' && this.minDate !== null) {\r\n        var _minDate = moment(this.minDate);\r\n        var _date = moment(date);\r\n\r\n        if (!checkHour && !checkMinute) {\r\n          _minDate.hour(0);\r\n          _minDate.minute(0);\r\n\r\n          _date.hour(0);\r\n          _date.minute(0);\r\n        }\r\n\r\n        _minDate.second(0);\r\n        _date.second(0);\r\n        _minDate.millisecond(0);\r\n        _date.millisecond(0);\r\n\r\n        if (!checkMinute) {\r\n          _date.minute(0);\r\n          _minDate.minute(0);\r\n\r\n          _return = (parseInt(_date.format(\"X\")) >= parseInt(_minDate.format(\"X\")));\r\n        }\r\n        else {\r\n          _return = (parseInt(_date.format(\"X\")) >= parseInt(_minDate.format(\"X\")));\r\n        }\r\n      }\r\n\r\n      return _return;\r\n    },\r\n    isBeforeMaxDate: function (date, checkTime, checkMinute) {\r\n      var _return = true;\r\n\r\n      if (typeof(this.maxDate) !== 'undefined' && this.maxDate !== null) {\r\n        var _maxDate = moment(this.maxDate);\r\n        var _date = moment(date);\r\n\r\n        if (!checkTime && !checkMinute) {\r\n          _maxDate.hour(0);\r\n          _maxDate.minute(0);\r\n\r\n          _date.hour(0);\r\n          _date.minute(0);\r\n        }\r\n\r\n        _maxDate.second(0);\r\n        _date.second(0);\r\n        _maxDate.millisecond(0);\r\n        _date.millisecond(0);\r\n\r\n        if (!checkMinute) {\r\n          _date.minute(0);\r\n          _maxDate.minute(0);\r\n\r\n          _return = (parseInt(_date.format(\"X\")) <= parseInt(_maxDate.format(\"X\")));\r\n        }\r\n        else {\r\n          _return = (parseInt(_date.format(\"X\")) <= parseInt(_maxDate.format(\"X\")));\r\n        }\r\n      }\r\n\r\n      return _return;\r\n    },\r\n    isInDisableDates: function (date) {\r\n      var dut = date.format('MMMM Do YYYY');\r\n      if (this.disableDates.indexOf(dut) > -1) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    isWeekDay: function(date) {\r\n      if (this.weekDays) {\r\n        if (date.isoWeekday() <= 5) {\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    selectDate: function (date) {\r\n      if (date) {\r\n        this.currentDate = moment(date);\r\n        if (!this.isAfterMinDate(this.currentDate)) {\r\n          this.currentDate = moment(this.minDate);\r\n        }\r\n\r\n        if (!this.isBeforeMaxDate(this.currentDate)) {\r\n          this.currentDate = moment(this.maxDate);\r\n        }\r\n        this.currentDate.locale(this.params.lang);\r\n        this.calendarStart = moment(this.currentDate);\r\n        this.meridien = this.currentDate.hour() >= 12 ? 'PM' : 'AM';\r\n      }\r\n    },\r\n    isPM: function () {\r\n      return this.meridien === 'PM';\r\n    },\r\n    incrementMonth: function (amount) {\r\n      if (amount === 1 && this.isNextMonthVisible()) {\r\n        this.selectDate(this.currentDate.add(amount, 'month'));\r\n      }\r\n\r\n      if (amount === -1 && this.isPreviousMonthVisible()) {\r\n        this.selectDate(this.currentDate.add(amount, 'month'));\r\n      }\r\n    },\r\n    incrementYear: function (amount) {\r\n      if (amount === 1 && this.isNextYearVisible()) {\r\n        this.selectDate(this.currentDate.add(amount, 'year'));\r\n      }\r\n\r\n      if (amount === -1 && this.isPreviousYearVisible()) {\r\n        this.selectDate(this.currentDate.add(amount, 'year'));\r\n      }\r\n    },\r\n    openMenu: function ($mdMenu, ev) {\r\n      $mdMenu.open(ev);  \r\n    },\r\n    monthsAvailable: function () {\r\n      var monthsArr = [], \r\n          _date = moment(this.currentDate);\r\n\r\n      for (var m = 0; m < 12; m++) {\r\n        var curMonth = _date.month(m);\r\n        if (this.isAfterMinDate(curMonth.endOf('month')) && this.isBeforeMaxDate(curMonth.startOf('month'))) {\r\n          monthsArr.push(curMonth.format('MMMM'));\r\n        }\r\n      }\r\n      return monthsArr;\r\n    },\r\n    selectMonth: function (month) {\r\n      this.selectDate(this.currentDate.month(month));\r\n    },\r\n    yearsAvailable: function () {\r\n      var _minDate, _maxDate, len, startYear, yearsArr = [],\r\n      _date = this.currentDate.year();\r\n\r\n      if (typeof(this.minDate) !== 'undefined' && this.minDate !== null) {\r\n        _minDate = moment(this.minDate).year();\r\n      }\r\n      if (typeof(this.maxDate) !== 'undefined' && this.maxDate !== null) {\r\n        _maxDate = moment(this.maxDate).year();\r\n      }\r\n\r\n      if (_maxDate && _minDate) {\r\n        len = _maxDate - _minDate;\r\n        startYear = _minDate;\r\n      } else if (_minDate) { \r\n        len = 115;\r\n        startYear = _minDate;\r\n      } else if (_maxDate) { \r\n        len = 30;\r\n        startYear = _maxDate - len;\r\n      } else {\r\n        len = 60;\r\n        startYear = _date - len/2;\r\n      }\r\n     \r\n      for (var i=0; i < len; i++) {\r\n        yearsArr.push(startYear+i);\r\n      }\r\n      return yearsArr;\r\n    },\r\n    selectYear: function (year) {\r\n      this.selectDate(this.currentDate.year(year));\r\n    },\r\n    isPreviousMonthVisible: function () {\r\n      return this.calendarStart && this.isAfterMinDate(moment(this.calendarStart).startOf('month'), false, false);\r\n    },\r\n    isNextMonthVisible: function () {\r\n      return this.calendarStart && this.isBeforeMaxDate(moment(this.calendarStart).endOf('month'), false, false);\r\n    },\r\n    isPreviousYearVisible: function () {\r\n      return this.calendarStart && this.isAfterMinDate(moment(this.calendarStart).startOf('year'), false, false);\r\n    },\r\n    isNextYearVisible: function () {\r\n      return this.calendarStart && this.isBeforeMaxDate(moment(this.calendarStart).endOf('year'), false, false);\r\n    },\r\n    isHourAvailable: function (hour) {\r\n      var _date = moment(this.currentDate);\r\n      if (this.params.shortTime) {\r\n        _date.hour(this.convertHours(hour)).minute(0).second(0);\r\n      } else {\r\n        _date.hour(hour).minute(0).second(0);\r\n      }\r\n      return this.isAfterMinDate(_date, true, false) && this.isBeforeMaxDate(_date, true, false);\r\n    },\r\n    isMinuteAvailable: function (minute) {\r\n      var _date = moment(this.currentDate);\r\n      _date.minute(minute).second(0);\r\n      return this.isAfterMinDate(_date, true, true) && this.isBeforeMaxDate(_date, true, true);\r\n    },\r\n    isSecondAvailable: function (second) {\r\n      return true;\r\n    },\r\n    start: function () {\r\n      this.currentView = VIEW_STATES.DATE;\r\n      if (this.params.date) {\r\n        this.initDate();\r\n      } else {\r\n        if (this.params.time) {\r\n          this.initHours();\r\n        }\r\n      }\r\n    },\r\n    today: function () {\r\n      var nearestMin = this.params.minuteSteps;\r\n      var date = moment();\r\n      var minutes = (nearestMin * Math.round(date.minute() / nearestMin));\r\n      if (minutes >= 60) {\r\n        minutes = 60 - nearestMin; //always push down\r\n      }\r\n      this.selectDate(moment(date).minutes(minutes));\r\n    },\r\n    ok: function () {\r\n      switch (this.currentView) {\r\n        case VIEW_STATES.DATE:\r\n          if (this.params.time === true) {\r\n            this.initHours();\r\n          } else {\r\n            this.hide(true);\r\n          }\r\n          break;\r\n        case VIEW_STATES.HOUR:\r\n          if (this.params.minutes === true) {\r\n            this.initMinutes();\r\n          } else {\r\n            this.hide(true);\r\n          }\r\n          break;\r\n        case VIEW_STATES.MINUTE:\r\n          if (this.params.seconds === true) {\r\n            this.initSeconds();\r\n          } else {\r\n            this.hide(true);\r\n          }\r\n          break;\r\n        case VIEW_STATES.SECOND:\r\n          this.hide(true);\r\n          break;\r\n      }\r\n    },\r\n    cancel: function () {\r\n      if (this.params.time) {\r\n        switch (this.currentView) {\r\n          case VIEW_STATES.DATE:\r\n            this.hide();\r\n            break;\r\n          case VIEW_STATES.HOUR:\r\n            if (this.params.date) {\r\n              this.initDate();\r\n            }\r\n            else {\r\n              this.hide();\r\n            }\r\n            break;\r\n          case VIEW_STATES.MINUTE:\r\n            this.initHours();\r\n            break;\r\n          case VIEW_STATES.SECOND:\r\n            this.initMinutes();\r\n            break;  \r\n        }\r\n      }\r\n      else {\r\n        this.hide();\r\n      }\r\n    },\r\n    selectMonthBefore: function () {\r\n      this.calendarStart.subtract(1, 'months');\r\n    },\r\n    selectMonthAfter: function () {\r\n      this.calendarStart.add(1, 'months');\r\n    },\r\n    selectYearBefore: function () {\r\n      this.calendarStart.subtract(1, 'years');\r\n    },\r\n    selectYearAfter: function () {\r\n      this.calendarStart.add(1, 'years');\r\n    },\r\n    selectAM: function () {\r\n      if (this.isHourAvailable(0) || this.isHourAvailable(12)) {\r\n        if (this.currentDate.hour() >= 12) {\r\n          this.selectDate(this.currentDate.subtract(12, 'hours'));\r\n        }\r\n        if (!this.isHourAvailable(this.currentDate.hour())) {\r\n          this.selectDate(this.currentDate.hour(this.minDate.hour()));\r\n        }\r\n        if (!this.isMinuteAvailable(this.currentDate.minute())) {\r\n          this.selectDate(this.currentDate.minute(this.minDate.minute()));\r\n        }\r\n      }\r\n    },\r\n    selectPM: function () {\r\n      if (this.isHourAvailable(13) || this.isHourAvailable(24)) {\r\n        if (this.currentDate.hour() < 12) {\r\n          this.selectDate(this.currentDate.add(12, 'hours'));\r\n        }\r\n        if (!this.isHourAvailable(this.currentDate.hour())) {\r\n          this.selectDate(this.currentDate.hour(this.maxDate.hour()));\r\n        }\r\n        if (!this.isMinuteAvailable(this.currentDate.minute())) {\r\n          this.selectDate(this.currentDate.minute(this.maxDate.minute()));\r\n        }\r\n      }\r\n    },\r\n    convertHours: function (h) {\r\n      var _return = h;\r\n      if ((h < 12) && this.isPM())\r\n        _return += 12;\r\n\r\n      return _return;\r\n    },\r\n    hide: function (okBtn) {\r\n      if (okBtn) {\r\n        this._dialog.hide(this.currentDate);\r\n      } else {\r\n        this._dialog.cancel();\r\n      }\r\n    }\r\n  };\r\n\r\n  angular.module(moduleName)\r\n    .directive('mdcDatetimePickerCalendar', [\r\n      function () {\r\n\r\n        var YEAR_MIN = 1920,\r\n          YEAR_MAX = new Date().getFullYear() + 30,\r\n          MONTHS_IN_ALL = (YEAR_MAX - YEAR_MIN + 1) * 12,\r\n          ITEM_HEIGHT = 240,\r\n          MONTHS = [];\r\n        for (var i = 0; i < MONTHS_IN_ALL; i++) {\r\n          MONTHS.push(i);\r\n        }\r\n\r\n        var currentMonthIndex = function (date, low) {\r\n          low = low ? low : 0;\r\n          var year = date.year();\r\n          var month = date.month();\r\n          return (((year - YEAR_MIN) * 12) + month - 1 ) - low;\r\n        };\r\n\r\n        return {\r\n          restrict: 'E',\r\n          scope: {\r\n            picker: '=',\r\n            date: '='\r\n          },\r\n          bindToController: true,\r\n          controllerAs: 'cal',\r\n          controller: ['$scope', function ($scope) {\r\n            var calendar = this, picker;\r\n\r\n            this.$onInit = function () {\r\n              picker = this.picker;\r\n\r\n              var days = [];\r\n              for (var i = picker.params.weekStart; days.length < 7; i++) {\r\n                if (i > 6) {\r\n                  i = 0;\r\n                }\r\n                days.push(i.toString());\r\n              }\r\n              calendar.week = days;\r\n\r\n              if (!picker.maxDate && !picker.minDate) {\r\n                calendar.months = MONTHS;\r\n              } else {\r\n                var low = picker.minDate ? currentMonthIndex(picker.minDate) : 0;\r\n                var high = picker.maxDate ? (currentMonthIndex(picker.maxDate) + 1) : MONTHS_IN_ALL;\r\n                calendar.months = MONTHS.slice(low, high);\r\n              }\r\n\r\n              calendar.topIndex = currentMonthIndex(picker.currentDate) - calendar.months[0];\r\n            };\r\n\r\n            if (angular.version.major === 1 && angular.version.minor < 5) {\r\n              this.$onInit();\r\n            }\r\n          \r\n            calendar.getItemAtIndex = function (index) {\r\n              var month = ((index + 1) % 12) || 12;\r\n              var year = YEAR_MIN + Math.floor(index / 12);\r\n              var monthObj = moment(picker.currentDate).year(year).month(month);\r\n              return generateMonthCalendar(monthObj);\r\n            };\r\n\r\n            $scope.$watch(function () {\r\n              return picker.currentDate ? picker.currentDate.format('YYYY-MM') : '';\r\n            }, function (val2, val1) {\r\n              if (val2 != val1) {\r\n                var nDate = moment(val2, 'YYYY-MM');\r\n                var low = picker.minDate ? currentMonthIndex(picker.minDate) : 0;\r\n                var index = currentMonthIndex(nDate, low);\r\n                if (calendar.topIndex != index) {\r\n                  calendar.topIndex = index;\r\n                }\r\n              }\r\n            });\r\n\r\n            var generateMonthCalendar = function (date) {\r\n              var month = {};\r\n              if (date !== null) {\r\n                month.name = date.format('MMMM YYYY');\r\n                var startOfMonth = moment(date).locale(picker.params.lang).startOf('month')\r\n                    .hour(date.hour())\r\n                    .minute(date.minute());\r\n                var iNumDay = startOfMonth.format('d');\r\n                month.days = [];\r\n                for (var i = startOfMonth.date(); i <= startOfMonth.daysInMonth(); i++) {\r\n                  if (i === startOfMonth.date()) {\r\n                    var iWeek = calendar.week.indexOf(iNumDay.toString());\r\n                    if (iWeek > 0) {\r\n                      for (var x = 0; x < iWeek; x++) {\r\n                        month.days.push(0);\r\n                      }\r\n                    }\r\n                  }\r\n                  month.days.push(moment(startOfMonth).locale(picker.params.lang).date(i));\r\n                }\r\n\r\n                var daysInAWeek = 7, daysTmp = [], slices = Math.ceil(month.days.length / daysInAWeek);\r\n                for (var j = 0; j < slices; j++) {\r\n                  daysTmp.push(month.days.slice(j * daysInAWeek, (j + 1) * daysInAWeek));\r\n                }\r\n                month.days = daysTmp;\r\n                return month;\r\n              }\r\n\r\n            };\r\n\r\n            calendar.toDay = function (i) {\r\n              return moment(parseInt(i), \"d\")\r\n                .locale(picker.params.lang)\r\n                .format(\"dd\")\r\n                .substring(0, 1);\r\n            };\r\n\r\n            calendar.isInRange = function (date) {\r\n              return picker.isAfterMinDate(moment(date), false, false) &&\r\n                picker.isBeforeMaxDate(moment(date), false, false) &&\r\n                picker.isWeekDay(moment(date)) &&\r\n                picker.isInDisableDates(moment(date));\r\n            };\r\n\r\n            calendar.selectDate = function (date) {\r\n              if (date) {\r\n                if (calendar.isSelectedDay(date)) {\r\n                  return picker.ok();\r\n                }\r\n                picker.selectDate(moment(date).hour(calendar.date.hour()).minute(calendar.date.minute()));\r\n                if (picker.params.autoOk) {\r\n                  picker.ok();\r\n                }\r\n              }\r\n            };\r\n\r\n            calendar.isSelectedDay = function (m) {\r\n              return m && calendar.date.date() === m.date() && calendar.date.month() === m.month() && calendar.date.year() === m.year();\r\n            };\r\n\r\n            calendar.isDateOfTheDay = function (m) {\r\n              var today = calendar.picker.options.showTodaysDate;\r\n              if (!today) {\r\n                return false;\r\n              }\r\n\r\n              return m && today.date() === m.date() && today.month() === m.month() && today.year() === m.year();\r\n            };\r\n          }],\r\n          template: \r\n          '<md-virtual-repeat-container md-top-index=\"cal.topIndex\" class=\"months\">' +\r\n          '<div md-virtual-repeat=\"idx in ::cal.months\" md-auto-shrink md-item-size=\"' + ITEM_HEIGHT + '\">' +\r\n          '     <div mdc-datetime-picker-calendar-month idx=\"idx\"></div>' +\r\n          '</div>' +\r\n          '</md-virtual-repeat-container>'\r\n        };\r\n      }])\r\n    .directive('mdcDatetimePickerCalendarMonth', ['$compile',\r\n      function ($compile) {\r\n        var buildCalendarContent = function (element, scope) {\r\n          var tbody = angular.element(element[0].querySelector('tbody'));\r\n          var calendar = scope.cal, month = scope.month;\r\n\r\n          var tbodyHtml = [];\r\n\r\n          month.days.forEach(function (weekDays, i) {\r\n            tbodyHtml.push('<tr>');\r\n            weekDays.forEach(function (weekDay, j) {\r\n              tbodyHtml.push('<td>');\r\n              if (weekDay) {\r\n                if (calendar.isInRange(weekDay)) {\r\n                  //build a\r\n                  var scopeRef = 'month[\\'days\\'][' + i + '][' + j + ']';\r\n\r\n                  tbodyHtml.push('<a id=\"date-' + weekDay.format('YYYY-MM-DD') + '\" href=\"#\" mdc-dtp-noclick class=\"dtp-select-day\" ng-class=\"{selected: cal.isSelectedDay(' + scopeRef + '), hilite: cal.isDateOfTheDay(' + scopeRef + ')}\" ng-click=\"cal.selectDate(' + scopeRef + ')\">');\r\n                  tbodyHtml.push(weekDay.format('D'));\r\n                  tbodyHtml.push('</a>');\r\n                } else {\r\n                  tbodyHtml.push('<span class=\"dtp-select-day\">');\r\n                  tbodyHtml.push(weekDay.format('D'));\r\n                  tbodyHtml.push('</span>');\r\n                }\r\n              }\r\n              tbodyHtml.push('</td>');\r\n            });\r\n            tbodyHtml.push('</tr>');\r\n          });\r\n\r\n          tbody.html(tbodyHtml.join(''));\r\n          $compile(tbody)(scope);\r\n        };\r\n\r\n        return {\r\n          scope: {\r\n            idx: '='\r\n          },\r\n          require: '^mdcDatetimePickerCalendar',\r\n          restrict: 'AE',\r\n          template: \r\n            '<div class=\"dtp-picker-month\">{{month.name}}</div>' +\r\n            '<table class=\"table dtp-picker-days\">' +\r\n            '    <thead>' +\r\n            '    <tr>' +\r\n            '        <th ng-repeat=\"day in cal.week track by $index\">{{cal.toDay(day)}}</th>' +\r\n            '    </tr>' +\r\n            '    </thead>' +\r\n            '    <tbody>' +\r\n            '    </tbody>' +\r\n            '</table>',\r\n          link: function (scope, element, attrs, calendar) {\r\n            scope.cal = calendar;\r\n            scope.month = calendar.getItemAtIndex(parseInt(scope.idx));\r\n            buildCalendarContent(element, scope);\r\n            scope.$watch(function () {\r\n              return scope.idx;\r\n            }, function (idx, oldIdx) {\r\n              if (idx != oldIdx) {\r\n                scope.month = calendar.getItemAtIndex(parseInt(scope.idx));\r\n                buildCalendarContent(element, scope);\r\n              }\r\n            });\r\n          }\r\n        };\r\n      }\r\n    ])\r\n  ;\r\n\r\n  angular.module(moduleName)\r\n    .directive('mdcDtpNoclick', function () {\r\n      return {\r\n        link: function (scope, el) {\r\n          el.on('click', function (e) {\r\n            e.preventDefault();\r\n          });\r\n        }\r\n      };\r\n    });\r\n  angular.module(moduleName)\r\n    .directive('mdcDatetimePickerClock', ['$timeout',\r\n      function ($timeout) {\r\n\r\n        var template = \r\n          '<div id=\"timePicker\" class=\"dtp-picker-clock\"><span ng-if=\"!points || points.length < 1\">&nbsp;</span>' +\r\n          '<div ng-repeat=\"point in points\" class=\"dtp-picker-time noselect\" ng-style=\"point.style\">' +\r\n          '   <a href=\"#\" id=\"time-{{mode}}-{{point.display}}\" mdc-dtp-noclick ng-class=\"{selected: point.value===currentValue}\" class=\"dtp-select-hour\" ng-click=\"setTime(point.value)\" ng-if=\"pointAvailable(point)\">{{point.display}}</a>' +\r\n          '   <a href=\"#\" mdc-dtp-noclick class=\"disabled dtp-select-hour\" ng-if=\"!pointAvailable(point)\">{{point.display}}</a>' +\r\n          '</div>' +\r\n          '<div ng-if=\"points24.length\" ng-repeat=\"point24 in points24\" class=\"dtp-picker-time noselect\" ng-style=\"point24.style\">' +\r\n          '   <a href=\"#\" id=\"time-24hours-{{point24.display}}\" mdc-dtp-noclick ng-class=\"{selected: point24.value===currentValue}\" class=\"dtp-select-hour\" ng-click=\"setTime(point24.value)\" ng-if=\"pointAvailable(point24)\">{{point24.display}}</a>' +\r\n          '   <a href=\"#\" mdc-dtp-noclick class=\"disabled dtp-select-hour\" ng-if=\"!pointAvailable(point24)\">{{point24.display}}</a>' +\r\n          '</div>' +\r\n          '<div class=\"dtp-hand dtp-hour-hand\"></div>' +\r\n          '<div class=\"dtp-hand dtp-minute-hand\"></div>' +\r\n          '<div ng-if=\"picker.params.seconds\" class=\"dtp-hand dtp-second-hand\"></div>' +\r\n          '<div class=\"dtp-clock-center\"></div>' +\r\n          '</div>';\r\n\r\n        return {\r\n          restrict: 'E',\r\n          template: template,\r\n          link: function (scope, element, attrs) {\r\n            var minuteMode = attrs.mode === 'minutes';\r\n            var secondMode = attrs.mode === 'seconds';\r\n            var picker = scope.picker;\r\n            //banking on the fact that there will only be one at a time\r\n            var componentRoot = document.querySelector('md-dialog.dtp');\r\n\r\n            var setTimeDegRay = function(deg, ray) {\r\n              var val = 0;\r\n              deg = deg >= 360 ? 0 : deg;\r\n              if (deg !== 0) {\r\n                var divider = minuteMode||secondMode ? 60 : 12;\r\n                val = Math.round(divider / 360 * deg);\r\n              }\r\n\r\n              if (minuteMode) {\r\n                var nearestMin = picker.params.minuteSteps;\r\n                if (nearestMin < 1 || nearestMin > 59) nearestMin = 1;\r\n\r\n                var minutes = (nearestMin * Math.round(val / nearestMin));\r\n                if (minutes >= 60) {\r\n                  minutes = 60 - nearestMin; //always push down\r\n                }\r\n                picker.currentDate.minute(minutes);\r\n              } else if (!secondMode){\r\n                if (val === 12) val = 0;\r\n                if (!picker.params.shortTime) picker.meridien = ray > 84 ? 'AM' : 'PM';\r\n                picker.currentDate.hour(picker.isPM() ? val + 12 : val);\r\n              } else {\r\n                if (val >= 60) val = 0;\r\n                picker.currentDate.second(val);\r\n              }\r\n              \r\n            };\r\n\r\n            var isTouchSupported = ('ontouchstart' in window) ? true : false,\r\n            EVENTS = {\r\n              POINTER_DOWN : isTouchSupported ? 'touchstart' : 'mousedown',\r\n              POINTER_UP   : isTouchSupported ? 'touchend'   : 'mouseup',\r\n              POINTER_MOVE : isTouchSupported ? 'touchmove'  : 'mousemove'\r\n            };\r\n\r\n            var onMoveEvent = function(e) {\r\n              e.preventDefault();\r\n\r\n              var closestTarget = e.currentTarget.closest('div'),\r\n              clientRect = closestTarget.getClientRects()[0];\r\n\r\n              if (isTouchSupported) e = e.changedTouches[0];\r\n              \r\n              var x = ((closestTarget.offsetWidth / 2) - (e.pageX - clientRect.left)),\r\n                  y = ((e.pageY - clientRect.top) - (closestTarget.offsetHeight / 2));\r\n              \r\n              var ray = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n              var deg = Math.round((Math.atan2(x, y) * (180 / Math.PI)));\r\n\r\n              $timeout(function() {\r\n                setTimeDegRay(deg+180, ray);\r\n              });\r\n            };\r\n\r\n            element.on(EVENTS.POINTER_DOWN, function() {\r\n               element.on(EVENTS.POINTER_MOVE, onMoveEvent);\r\n            });\r\n\r\n            element.on(EVENTS.POINTER_UP, function() {\r\n                element.off(EVENTS.POINTER_MOVE);\r\n            });\r\n\r\n            scope.$on(\"$destroy\", function() {\r\n                element.off(EVENTS.POINTER_MOVE, onMoveEvent); \r\n            });\r\n\r\n            var exec = function () {\r\n              var clock = angular.element(element[0].querySelector('.dtp-picker-clock')),\r\n                  pickerEl = angular.element(componentRoot.querySelector('.dtp-picker'));\r\n\r\n              var w = componentRoot.querySelector('.dtp-content').offsetWidth;\r\n              var pl = parseInt(css(pickerEl, 'paddingLeft').replace('px', '')) || 0;\r\n              var pr = parseInt(css(pickerEl, 'paddingRight').replace('px', '')) || 0;\r\n              var ml = parseInt(css(clock, 'marginLeft').replace('px', '')) || 0;\r\n              var mr = parseInt(css(clock, 'marginRight').replace('px', '')) || 0;\r\n              //set width\r\n              var clockWidth = (w - (ml + mr + pl + pr));\r\n              clock.css('width', (clockWidth) + 'px');\r\n\r\n              var pL = parseInt(css(pickerEl, 'paddingLeft').replace('px', '')) || 0;\r\n              var pT = parseInt(css(pickerEl, 'paddingTop').replace('px', '')) || 0;\r\n              var mL = parseInt(css(clock, 'marginLeft').replace('px', '')) || 0;\r\n              var mT = parseInt(css(clock, 'marginTop').replace('px', '')) || 0;\r\n\r\n              var r = (clockWidth / 2);\r\n              var j = r / 1.2; // radius for low number\r\n   \r\n              var points = [];\r\n\r\n              for (var h = 0; h < 12; ++h) {\r\n                var x = j * Math.sin(Math.PI * 2 * (h / 12));\r\n                var y = j * Math.cos(Math.PI * 2 * (h / 12));\r\n                var left = (r + x + pL / 2) - (pL + mL);\r\n                var top = (r - y - mT / 2) - (pT + mT);\r\n\r\n                var hour = {\r\n                  left: left,\r\n                  top: top,\r\n                  value: (minuteMode||secondMode ? (h * 5) : h), //5 for minute 60/12\r\n                  style: {'margin-left': left + 'px', 'margin-top': top + 'px'}\r\n                };\r\n\r\n                if (minuteMode || secondMode) {\r\n                  hour.display = hour.value < 10 ? ('0' + hour.value) : hour.value;\r\n                } else {\r\n                  if (picker.params.shortTime) {\r\n                    hour.display = (h === 0) ? 12 : h;\r\n                  } else {\r\n                    hour.display = h;\r\n                  }\r\n                }\r\n\r\n                points.push(hour);\r\n              }\r\n              scope.points = points;\r\n\r\n              if (!picker.params.shortTime && !minuteMode && !secondMode) {\r\n                var points24 = [];\r\n\r\n                var j24 = r / 1.8; // radius for high number\r\n                for (var h24 = 12; h24 < 24; ++h24) {\r\n                  var x24 = j24 * Math.sin(Math.PI * 2 * (h24 / 12));\r\n                  var y24 = j24 * Math.cos(Math.PI * 2 * (h24 / 12));\r\n                  var left24 = (r + x24 + pL / 2) - (pL + mL);\r\n                  var top24 = (r - y24 - mT / 2) - (pT + mT);\r\n\r\n                  var hour24 = {\r\n                    left: left24,\r\n                    top: top24,\r\n                    value: h24,\r\n                    style: {'margin-left': left24 + 'px', 'margin-top': top24 + 'px'}\r\n                  };\r\n\r\n                  hour24.display = h24;\r\n\r\n                  points24.push(hour24);\r\n                }\r\n                scope.points24 = points24;\r\n              }\r\n\r\n              scope.mode = attrs.mode;\r\n              setCurrentValue();\r\n              clock.css('height', clockWidth + 'px');\r\n\r\n              var clockCenter = element[0].querySelector('.dtp-clock-center');\r\n              var centerWidth = (clockCenter.offsetWidth / 2) || 7.5,\r\n                centerHeight = (clockCenter.offsetHeight / 2) || 7.5;\r\n              var _hL = r / (picker.params.shortTime ? 1.8 : 2.3);\r\n              var _mL = r / 1.4;\r\n              var _sL = r / 1;\r\n\r\n              angular.element(element[0].querySelector('.dtp-hour-hand')).css({\r\n                left: r + (mL * 1.5) + 'px',\r\n                height: _hL + 'px',\r\n                marginTop: (r - _hL - pL) + 'px'\r\n              }).addClass(!minuteMode && !secondMode ? 'on' : '');\r\n\r\n              angular.element(element[0].querySelector('.dtp-minute-hand')).css\r\n              ({\r\n                left: r + (mL * 1.5) + 'px',\r\n                height: _mL + 'px',\r\n                marginTop: (r - _mL - pL) + 'px'\r\n              }).addClass(minuteMode ? 'on' : '');\r\n\r\n              angular.element(element[0].querySelector('.dtp-second-hand')).css\r\n              ({\r\n                left: r + (mL * 1.5) + 'px',\r\n                height: _sL + 'px',\r\n                marginTop: (r - _sL - pL) + 'px'\r\n              }).addClass(secondMode ? 'on' : '');\r\n\r\n              angular.element(clockCenter).css({\r\n                left: (r + pL + mL - centerWidth) + 'px',\r\n                marginTop: (r - (mL / 2)) - centerHeight + 'px'\r\n              });\r\n              animateHands();\r\n            };\r\n\r\n            var animateHands = function () {\r\n              var _date = picker.currentNearestMinute();\r\n              var h = _date.hour();\r\n              var m = _date.minute();\r\n              var s = _date.second();\r\n\r\n              rotateElement(angular.element(element[0].querySelector('.dtp-hour-hand')), 30 * h);\r\n              rotateElement(angular.element(element[0].querySelector('.dtp-minute-hand')), 6 * m);\r\n              rotateElement(angular.element(element[0].querySelector('.dtp-second-hand')), 6 * s);\r\n            };\r\n\r\n            var rotateElement = function (el, deg) {\r\n              angular.element(el).css({\r\n                WebkitTransform: 'rotate(' + deg + 'deg)',\r\n                '-moz-transform': 'rotate(' + deg + 'deg)',\r\n                '-ms-transform': 'rotate(' + deg + 'deg)',\r\n                'transform': 'rotate(' + deg + 'deg)'\r\n              });\r\n            };\r\n\r\n\r\n            var setCurrentValue = function () {\r\n              var date = picker.currentNearestMinute();\r\n              var nbH = picker.params.shortTime ? 12 : 24;\r\n              if (minuteMode) {\r\n                scope.currentValue = date.minute();\r\n              } else if (secondMode) {\r\n                scope.currentValue = date.second();\r\n              } else {\r\n                scope.currentValue = date.hour() % nbH;\r\n              }\r\n            };\r\n\r\n            scope.$watch(function () {\r\n              var tmp = picker.currentNearestMinute();\r\n              return tmp ? tmp.format('HH:mm:ss') : '';\r\n            }, function () {\r\n              setCurrentValue();\r\n              animateHands();\r\n            });\r\n\r\n            scope.setTime = function (val) {\r\n              if (!minuteMode && !secondMode) {\r\n                if (val === scope.currentValue && !picker.params.autoOk) picker.ok(); // double click\r\n\r\n                if (picker.params.shortTime) {\r\n                  picker.currentDate.hour(picker.isPM() ? (val + 12) : val);\r\n                } else {\r\n                  picker.currentDate.hour(val);\r\n                  if (val >= 12) picker.meridien = 'PM';\r\n                  else picker.meridien = 'AM';\r\n                }\r\n                if (picker.params.autoOk) picker.ok(); // single click\r\n              } else if (!secondMode){\r\n                if (val === scope.currentValue) picker.ok(); // double click\r\n                picker.currentDate.minute(val);\r\n                if (!picker.params.seconds) {\r\n                  picker.currentDate.second(0);\r\n                } else {\r\n                  if (picker.params.autoOk) picker.ok(); // single click\r\n                }\r\n              } else {  \r\n                if (val === scope.currentValue) picker.ok(); // double click\r\n                picker.currentDate.second(val);\r\n              }\r\n            };\r\n\r\n            scope.pointAvailable = function (point) {\r\n              if (minuteMode) {\r\n                return picker.isMinuteAvailable(point.value);\r\n              } else if (secondMode) {\r\n                return picker.isSecondAvailable(point.value);\r\n              } else {\r\n                return picker.isHourAvailable(point.value);\r\n              }\r\n            };\r\n\r\n            var unWatcher = scope.$watch(function () {\r\n              return element[0].querySelectorAll('div').length;\r\n            }, function () {\r\n              exec();\r\n              unWatcher();\r\n            });\r\n          }\r\n        };\r\n      }]);\r\n    return moduleName;\r\n  }\r\n\r\n  var isElectron = window && window.process && window.process.type;\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(['moment'], ngMaterialDatePicker);\r\n  } else if (typeof module !== 'undefined' && module && module.exports && (typeof require === 'function') && !isElectron) {\r\n    module.exports = ngMaterialDatePicker(require('moment'));\r\n  } else {\r\n    ngMaterialDatePicker((typeof global !== 'undefined' ? global : window).moment);\r\n  }\r\n})();\r\n"]}